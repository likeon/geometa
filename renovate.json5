{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",

  /* keep the nice defaults from config:base **but** immediately cancel
     every implicit grouping it adds (monorepos, test-libs, etc.).
     The "catch-all" rule must come first so later rules can re-enable
     grouping where we want it. */
  "extends": ["config:base"],

  /* Enable Flux manager for HelmRelease and HelmRepository resources */
  "flux": {
    "fileMatch": ["^cluster/.+\\.ya?ml$"]
  },

  /* Enable helm-values manager for processing Helm values in HelmRelease resources */
  "helm-values": {
    "fileMatch": ["^cluster/.+\\.ya?ml$"]
  },
  "packageRules": [
    /* 0Ô∏è‚É£  turn off every grouping the presets might introduce */
    {
      "matchPackagePatterns": ["*"],
      "groupName": null         // "null" = no grouping
    },

    /* üîß Elysia packages - group all updates across api and frontend */
    {
      "matchPackagePatterns": ["^elysia$", "^@elysiajs/"],
      "matchPaths": ["apps/api/**", "apps/frontend/**"],
      "groupName": "elysia ecosystem",
      "groupSlug": "elysia-updates"
    },

    /* 1Ô∏è‚É£  frontend ‚Äï non-major (patch+minor) together */
    {
      "matchPaths": ["apps/frontend/**"],   // anything under apps/frontend
      "matchUpdateTypes": ["patch", "minor"],
      "groupName": "frontend ‚Äì non-major",
      "groupSlug": "frontend-minor-patch"
    },
    /* 2Ô∏è‚É£  frontend ‚Äï major bumps together (kept separate from #1) */
    {
      "matchPaths": ["apps/frontend/**"],
      "matchUpdateTypes": ["major"],
      "groupName": "frontend ‚Äì major",
      "groupSlug": "frontend-major"
    },

    /* 3Ô∏è‚É£  api ‚Äï non-major */
    {
      "matchPaths": ["apps/api/**"],
      "matchUpdateTypes": ["patch", "minor"],
      "groupName": "api ‚Äì non-major",
      "groupSlug": "api-minor-patch"
    },
    /* 4Ô∏è‚É£  api ‚Äï major */
    {
      "matchPaths": ["apps/api/**"],
      "matchUpdateTypes": ["major"],
      "groupName": "api ‚Äì major",
      "groupSlug": "api-major"
    },
    /* 3Ô∏è‚É£  userscript ‚Äï non-major */
    {
      "matchPaths": ["userscript//**"],
      "matchUpdateTypes": ["patch", "minor"],
      "groupName": "userscript ‚Äì non-major",
      "groupSlug": "userscript-minor-patch"
    },
    /* 4Ô∏è‚É£  userscript ‚Äï major */
    {
      "matchPaths": ["userscript/**"],
      "matchUpdateTypes": ["major"],
      "groupName": "userscript ‚Äì major",
      "groupSlug": "userscript-major"
    },

    /* 5Ô∏è‚É£  Helm charts ‚Äï all updates grouped */
    {
      "matchDatasources": ["helm", "docker"],
      "matchPaths": ["cluster/**"],
      "groupName": "helm charts",
      "groupSlug": "helm-charts"
    }
  ]
}
